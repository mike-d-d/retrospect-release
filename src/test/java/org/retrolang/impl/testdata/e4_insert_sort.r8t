// An example from overview.md#immutable-values

return insertSort([3, 1, 4, 1, 5, 9, 2, 6, 5])

function insertSort(nums) {
  for i in 2 .. size(nums) sequential nums {
    // nums[1 .. i-1] are already sorted, insert nums[i] appropriately
    n_i = nums[i]
    // If n_i turns out to be the smallest value we've
    // seen, this is where it will be inserted.
    dest = 1
    for j in reverse(1 .. i-1) sequential {
      if n_i >= nums[j] {
        // It's not the smallest; insert after this element
        break { dest = j + 1 }
      }
    }
    if dest != i {
      nums[dest+1 .. i] = nums[dest .. i-1]
      nums[dest] = n_i
    }
  }
  return nums
}

/* RUN () RETURNS
  [1, 1, 2, 3, 4, 5, 5, 6, 9]
---
allocated=26288/977, peak=80
*/
